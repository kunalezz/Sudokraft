#include <bits/stdc++.h>

using namespace std;
class sudoku_cracker
{
private:
    vector<vector<char>> board;

    bool isvalid(vector<vector<char>> &board, int row, int col, char c)
    {
        for (int k = 0; k < 9; k++)
        {
            if (board[row][k] == c)
                return false; // this checks the whole row!
            if (board[k][col] == c)
                return false; // this checks the while col!
            // this is important, checking the sub matrix! it has a formula
            if (board[3 * (row / 3) + (k / 3)][3 * (col / 3) + (k % 3)] == c)
                return false;
        }
        return true;
    }
    bool solve(vector<vector<char>> &board)
    {
        for (int i = 0; i < board.size(); i++)
        {
            for (int j = 0; j < board[i].size(); j++)
            {
                if (board[i][j] == '.')
                {
                    for (char c = '1'; c <= '9'; c++)
                    {
                        if (isvalid(board, i, j, c))
                        {
                            board[i][j] = c; // here we inserted the character at the place of '.'
                            if (solve(board) == true)
                            {
                                return true;
                            }
                            else
                            {
                                board[i][j] = '.';
                            }
                        }
                    }
                    return false;
                }
            }
        }
        return true;
    }

public:
    sudoku_cracker(const vector<vector<char>> &initialBoard)
    {
        board = initialBoard;
    }

    bool solveSudoku(vector<vector<char>> &board)
    {
        return solve(board);
    }

    void printBoard()
    {
        for (auto &row : board)
        {
            for (auto &cell : row)
                cout << cell << " ";
            cout << endl;
        }
    }
};

void genRandom(vector<vector<vector<char>>> &board)
{
    board = {
        {{'5', '3', '.', '.', '7', '.', '.', '.', '.'},
         {'6', '.', '.', '1', '9', '5', '.', '.', '.'},
         {'.', '9', '8', '.', '.', '.', '.', '6', '.'},
         {'8', '.', '.', '.', '6', '.', '.', '.', '3'},
         {'4', '.', '.', '8', '.', '3', '.', '.', '1'},
         {'7', '.', '.', '.', '2', '.', '.', '.', '6'},
         {'.', '6', '.', '.', '.', '.', '2', '8', '.'},
         {'.', '.', '.', '4', '1', '9', '.', '.', '5'},
         {'.', '.', '.', '.', '8', '.', '.', '7', '9'}},
        {{'.', '.', '5', '3', '.', '.', '.', '.', '.'},
         {'8', '.', '.', '.', '.', '.', '.', '2', '.'},
         {'.', '7', '.', '.', '1', '.', '5', '.', '.'},
         {'4', '.', '.', '.', '.', '5', '3', '.', '.'},
         {'.', '1', '.', '.', '7', '.', '.', '.', '6'},
         {'.', '.', '3', '2', '.', '.', '.', '8', '.'},
         {'.', '6', '.', '5', '.', '.', '.', '.', '9'},
         {'.', '.', '4', '.', '.', '.', '.', '3', '.'},
         {'.', '.', '.', '.', '.', '9', '7', '.', '.'}},
        {{'.', '.', '.', '.', '9', '.', '2', '.', '.'},
         {'5', '.', '.', '.', '.', '.', '.', '.', '.'},
         {'.', '2', '.', '.', '.', '.', '.', '.', '.'},
         {'.', '.', '.', '5', '4', '.', '.', '.', '7'},
         {'.', '.', '8', '.', '.', '.', '3', '.', '.'},
         {'3', '.', '.', '.', '2', '9', '.', '.', '.'},
         {'.', '.', '.', '.', '.', '.', '.', '3', '.'},
         {'.', '.', '.', '.', '.', '.', '.', '.', '6'},
         {'.', '.', '1', '.', '6', '.', '.', '.', '.'}},
        {{'.', '.', '3', '.', '2', '.', '6', '.', '.'},
         {'9', '.', '.', '3', '.', '5', '.', '.', '1'},
         {'.', '.', '1', '8', '.', '6', '4', '.', '.'},
         {'.', '.', '8', '1', '.', '2', '9', '.', '.'},
         {'7', '.', '.', '.', '.', '.', '.', '.', '8'},
         {'.', '.', '6', '7', '.', '8', '2', '.', '.'},
         {'.', '.', '2', '6', '.', '9', '5', '.', '.'},
         {'8', '.', '.', '2', '.', '3', '.', '.', '9'},
         {'.', '.', '5', '.', '1', '.', '3', '.', '.'}},
        {{'.', '.', '.', '.', '.', '.', '.', '.', '2'},
         {'.', '.', '.', '.', '.', '.', '.', '6', '3'},
         {'.', '.', '3', '.', '.', '5', '4', '.', '1'},
         {'.', '9', '.', '.', '.', '.', '.', '7', '.'},
         {'.', '.', '.', '1', '8', '.', '.', '.', '.'},
         {'.', '3', '.', '.', '.', '.', '.', '4', '.'},
         {'7', '.', '6', '4', '.', '.', '2', '.', '.'},
         {'9', '1', '.', '.', '.', '.', '.', '.', '.'},
         {'8', '.', '.', '.', '.', '.', '.', '.', '.'}},
        {{'.', '.', '5', '9', '.', '.', '.', '.', '.'},
         {'.', '4', '.', '.', '2', '3', '.', '.', '9'},
         {'3', '.', '9', '.', '.', '.', '6', '.', '.'},
         {'.', '1', '4', '.', '.', '.', '.', '2', '.'},
         {'6', '.', '.', '.', '7', '.', '.', '.', '4'},
         {'.', '9', '.', '.', '.', '.', '7', '5', '.'},
         {'.', '.', '6', '.', '.', '.', '1', '.', '7'},
         {'9', '.', '.', '4', '8', '.', '.', '6', '.'},
         {'.', '.', '.', '.', '.', '9', '8', '.', '.'}},
        {{'2', '.', '.', '.', '.', '.', '.', '.', '.'},
         {'.', '.', '.', '6', '.', '.', '.', '.', '3'},
         {'.', '7', '4', '.', '8', '.', '.', '.', '.'},
         {'.', '.', '.', '.', '3', '.', '.', '.', '2'},
         {'.', '8', '.', '.', '.', '.', '.', '6', '.'},
         {'1', '.', '.', '.', '6', '.', '.', '.', '.'},
         {'.', '.', '.', '.', '2', '.', '3', '7', '.'},
         {'7', '.', '.', '.', '.', '1', '.', '.', '.'},
         {'.', '.', '.', '.', '.', '.', '.', '.', '8'}},
        {{'.', '.', '.', '2', '.', '.', '.', '6', '3'},
         {'3', '.', '.', '.', '.', '5', '4', '.', '1'},
         {'.', '.', '1', '.', '.', '3', '9', '8', '.'},
         {'.', '.', '.', '.', '.', '9', '.', '.', '.'},
         {'1', '.', '9', '8', '.', '.', '.', '.', '2'},
         {'.', '.', '.', '.', '.', '.', '.', '1', '.'},
         {'.', '5', '.', '.', '.', '.', '.', '7', '.'},
         {'4', '.', '.', '5', '.', '.', '.', '.', '6'},
         {'.', '.', '.', '.', '.', '7', '.', '.', '.'}},
        {{'1', '.', '.', '4', '8', '.', '.', '.', '5'},
         {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
         {'6', '7', '.', '.', '.', '.', '.', '.', '9'},
         {'.', '2', '.', '.', '7', '1', '5', '.', '.'},
         {'3', '.', '.', '2', '.', '9', '.', '.', '1'},
         {'.', '.', '9', '3', '4', '.', '.', '2', '.'},
         {'5', '.', '.', '.', '.', '.', '.', '1', '7'},
         {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
         {'2', '.', '.', '.', '5', '4', '.', '.', '3'}},
        {{'.', '2', '.', '.', '.', '.', '6', '.', '3'},
         {'.', '.', '.', '.', '3', '8', '.', '.', '.'},
         {'6', '.', '8', '.', '.', '.', '.', '7', '.'},
         {'9', '.', '7', '.', '.', '.', '.', '.', '.'},
         {'3', '.', '.', '.', '.', '.', '.', '.', '1'},
         {'.', '.', '.', '.', '.', '.', '9', '.', '4'},
         {'.', '5', '.', '.', '.', '.', '1', '.', '9'},
         {'.', '.', '.', '9', '6', '.', '.', '.', '.'},
         {'7', '.', '4', '.', '.', '.', '.', '2', '.'}},
        {{'.', '.', '.', '9', '.', '.', '.', '.', '6'},
         {'.', '.', '.', '1', '.', '3', '.', '.', '.'},
         {'.', '9', '3', '.', '.', '.', '1', '.', '.'},
         {'8', '.', '.', '.', '6', '.', '.', '.', '.'},
         {'.', '2', '.', '.', '.', '.', '.', '9', '.'},
         {'.', '.', '.', '.', '2', '.', '.', '.', '3'},
         {'.', '.', '1', '.', '.', '.', '6', '4', '.'},
         {'.', '.', '.', '4', '.', '7', '.', '.', '.'},
         {'2', '.', '.', '.', '.', '5', '.', '.', '.'}},
        {{'5', '1', '.', '.', '2', '.', '.', '.', '.'},
         {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
         {'.', '4', '.', '8', '.', '6', '1', '.', '.'},
         {'.', '.', '.', '.', '3', '.', '7', '.', '.'},
         {'.', '.', '6', '.', '.', '.', '9', '.', '.'},
         {'.', '.', '2', '.', '1', '.', '.', '.', '.'},
         {'.', '.', '9', '4', '.', '2', '.', '3', '.'},
         {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
         {'.', '.', '.', '.', '8', '.', '.', '5', '6'}},
        {{'.', '.', '.', '8', '.', '1', '.', '.', '.'},
         {'7', '.', '.', '.', '2', '.', '.', '.', '3'},
         {'.', '.', '.', '5', '.', '9', '.', '.', '.'},
         {'5', '.', '8', '.', '.', '.', '9', '.', '.'},
         {'.', '9', '.', '.', '.', '.', '.', '3', '.'},
         {'.', '.', '6', '.', '.', '.', '4', '.', '1'},
         {'.', '.', '.', '3', '.', '6', '.', '.', '.'},
         {'3', '.', '.', '.', '4', '.', '.', '.', '8'},
         {'.', '.', '.', '1', '.', '8', '.', '.', '.'}}};
}
int main()
{
    vector<vector<vector<char>>> board;
    genRandom(board);
    srand(time(0)); // at every call it will gen. a ne random value
    int index = rand() % board.size();
    sudoku_cracker prime_solver(board[index]); // here I created an object of the class and passed board[index] in it, after creating the object, parametrized constructor will get called automatically.

    cout << "Sudoku Puzzle (Index " << index << "):\n";
    prime_solver.printBoard();
    cout << "\nSolving...\n\n";

    if (prime_solver.solveSudoku(board[index])) // made a solve function call here!
    {
        // print the solved sudoku!
        cout << "Solved Sudoku (Index " << index << "):\n";
        for (int i = 0; i < board[index].size(); i++)
        {
            for (int j = 0; j < board[index][i].size(); j++)
            {
                cout << board[index][i][j] << " ";
            }
            cout << endl;
        }
    }
    else
    {
        cout << "Sudoku (Index " << index << ") is unsolvable.\n";
    }
    return 0;
}